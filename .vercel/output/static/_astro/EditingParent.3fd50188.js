import{R as n}from"./index.f824fa59.js";import{F as u,i as p}from"./index.10cbaf40.js";import{j as a}from"./jsx-runtime.0209ad28.js";function T(){const[o,d]=n.useState({type:"",occasion:"",photo:"",details:!1}),[i,v]=n.useState({}),[j,w]=n.useState(!1),[y,N]=n.useState([{name:"Concert",selected:!1},{name:"Street & Landscape",selected:!1}]),[g,m]=n.useState([]),[S,f]=n.useState([]),[l,h]=n.useState({}),x=["concert","streetlandscape"];n.useEffect(()=>{(async()=>{await fetch("http://localhost:8001/get_index_and_key_json",{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"}}).then(c=>c.json()).then(c=>{v(c.data)}).catch(c=>console.log(c))})().then(()=>{w(!0)})},[]);const k=t=>{t!==o.type&&(d(s=>{const e={...s};return e.type=x[t],e.occasion="",e.photo="",e.details=!1,e}),m([]),f([]),h({})),N(s=>{const e=[...s];for(let r of e)r.name===e[t].name?r.selected=!0:r.selected=!1;return e});let c=[];for(let s in i[x[t]].index)c.push({[s]:i[x[t]].index[s],selected:!1});m(c)},L=t=>{t!==o.occasion&&(d(s=>{const e={...s};return e.occasion=t,e.photo="",e.details=!1,e}),f([]),h({})),m(s=>{const e=[...s];for(let r of e)t===Object.keys(r)[0]?r.selected=!0:r.selected=!1;return e});let c=[];for(let s of i[o.type].keys[t])s.selected=!1,c.push(s);f(c)},O=(t,c)=>{t!==o.photo&&(d(s=>{const e={...s};return e.photo=t,e.details=!1,e}),h({})),f(s=>{const e=[...s];for(let r of e)t===Object.keys(r)[0]?r.selected=!0:r.selected=!1;return e}),d(s=>{const e={...s};return e.details=!0,e}),h({caption:c.caption,date:c.date,url:c.url,webp_url:c.webp_url,artist:c.artist,venue:c.venue})};return n.useEffect(()=>{console.log(i)},[i]),j?a.jsxs("div",{className:"mt-4 flex flex-row overflow-x-scroll ",children:[a.jsx("div",{className:"flex flex-col items-stretch",children:y.map((t,c)=>a.jsxs("div",{className:`${t.selected&&"text-sea-foam-green dark:text-dark-grayish-red"} flex cursor-pointer flex-row items-center justify-between hover:text-sea-foam-green dark:hover:text-dark-grayish-red`,onClick:()=>k(c),children:[a.jsx("div",{className:"mr-4 text-lg",children:t.name}),a.jsx("div",{className:"w-4",children:a.jsx(u,{icon:p,className:`${!t.selected&&"hidden"} text-sm`})})]},c))}),a.jsx("div",{className:"ml-4 flex flex-col items-stretch",children:g.map((t,c)=>{var s=Object.keys(t)[0],e=t[s],r=t[Object.keys(t)[1]];return a.jsxs("div",{className:`${r&&"text-sea-foam-green dark:text-dark-grayish-red"} flex cursor-pointer flex-row items-center justify-between hover:text-sea-foam-green dark:hover:text-dark-grayish-red`,onClick:()=>{L(s)},children:[a.jsx("div",{className:"mr-4 text-lg",children:e}),a.jsx("div",{className:"w-4",children:a.jsx(u,{icon:p,className:`${!r&&"hidden"} text-sm`})})]},c)})}),a.jsx("div",{className:"ml-4 flex flex-col items-stretch",children:S.map((t,c)=>{var s=Object.keys(t)[0],e=t[s],r=t.selected;return a.jsxs("div",{className:`${r&&"text-sea-foam-green dark:text-dark-grayish-red"} flex cursor-pointer flex-row items-center justify-between hover:text-sea-foam-green dark:hover:text-dark-grayish-red`,onClick:()=>{O(s,e)},children:[a.jsx("div",{className:"mr-4 text-lg",children:s}),a.jsx("div",{className:"w-4",children:a.jsx(u,{icon:p,className:`${!r&&"hidden"} text-sm`})})]},c)})}),a.jsxs("div",{className:`${!o.details&&"hidden"}`,children:[a.jsx("div",{className:"w-64",children:a.jsx("img",{src:l.webp_url,alt:l.caption,className:"h-full w-full"})}),a.jsxs("div",{children:["Caption: ",l.caption]}),a.jsxs("div",{children:["Date: ",l.date]}),o.type==="concert"?a.jsxs("div",{children:[a.jsxs("div",{children:["Artist: ",l.artist]}),a.jsxs("div",{children:["Venue: ",l.venue]})]}):a.jsxs("div",{children:["Place: ",l.venue]})]})]}):a.jsx("div",{className:"mt-4",children:"Loading..."})}export{T as default};
