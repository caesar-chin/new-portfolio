import{F as G,i as Ee,f as Ve,j as ot,p as E,e as xt,k as yt,l as vt,m as bt}from"./index.7e222333.js";import{r as O,R as k}from"./index.f824fa59.js";import{j as n}from"./jsx-runtime.0209ad28.js";/* empty css                       */function jt({typeName:e,occasionBool:t,occasionName:r,downloadJsonFiles:a,selectNewOccasion:s}){const o=O.useRef(null),[m,g]=O.useState(!1),y=w=>{g(w)},x=async w=>{w.preventDefault(),t&&await fetch("http://localhost:8001/add_occasion",{method:"PUT",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({type:e.toLowerCase(),occasion:o.current?.value})}).then(v=>v.json()).then(async v=>{v.status>=400?console.log("Error adding new occasion"):(console.log(v),console.log("Successfully added new occasion"),await a(),s(v.occasion_name,v.occasion_key),y(!1))})};return O.useEffect(()=>{m&&o.current&&o.current.focus()},[m]),n.jsxs("div",{children:[m&&n.jsx("div",{children:n.jsxs("form",{onSubmit:x,children:[n.jsx("input",{className:"border mb-1 mr-2 border-gray-500 bg-transparent text-lg",ref:o,type:"text",placeholder:`New ${t?"Occaison":"Photo"}`}),n.jsx("button",{type:"submit",children:n.jsx(G,{icon:Ee,className:"text-md mr-2 cursor-pointer hover:text-sea-foam-green dark:hover:text-dark-grayish-red"})}),n.jsx(G,{icon:Ve,onClick:()=>y(!1),className:"text-md cursor-pointer hover:text-sea-foam-green dark:hover:text-dark-grayish-red"})]})}),n.jsx("div",{onClick:()=>y(!0),className:"mb-1 mr-4 flex cursor-pointer flex-row items-center justify-between text-lg hover:text-sea-foam-green dark:hover:text-dark-grayish-red",children:"+ Add New "})]})}function wt({occasionList:e,showDelete:t,addOccasionDeleteObject:r,selectedList:a,removeOccasionDeleteObject:s,handleOccasionSelect:o,downloadJsonFiles:m,selectNewOccasion:g,selectedListName:y,previousType:x,showEdit:w,handleOccasionInputChange:v}){const[R,C]=k.useState(e);k.useEffect(()=>{e.length!==0&&C(e)},[e]);const W=(N,A)=>{let T=[...R],K={[A.replace(/ /g,"_")]:A,...Object.fromEntries(Object.entries(T[N]).filter(([B])=>B!==Object.keys(T[N])[0]))};T[N]=K,C(T)};return k.useEffect(()=>{w||C([...e])},[w,e]),!e||e.length===0?n.jsx("div",{}):n.jsxs("div",{children:[e.map((N,A)=>{var T=Object.keys(N)[0],L=N[T],K=N[Object.keys(N)[1]];if(R[A])var B=Object.keys(R[A])[0],ee=R[A][B];return n.jsxs("div",{className:"flex flex-row items-center",children:[t&&n.jsx("input",{type:"checkbox",className:"border focus:ring-3 text-sea-foarm-green mr-2 h-1 w-1 rounded border-gray-300 p-2 text-sm focus:border-sea-foam-green focus:bg-sea-foam-green focus:ring-sea-foam-green dark:text-dark-grayish-red dark:focus:border-dark-grayish-red dark:focus:bg-dark-grayish-red dark:focus:ring-dark-grayish-red",onChange:H=>{H.target.checked?r(A,{[T]:a.type+"/"+T}):H.target.checked||s(A,{[T]:a.type+"/"+T})},checked:N.deleted_selected}),n.jsxs("div",{className:"mb-1 flex flex-row items-center justify-between",children:[w?n.jsxs("div",{className:"flex flex-row items-center gap-2",children:[n.jsx("input",{className:"border mb-1 border-gray-500 bg-transparent text-lg",type:"text",value:ee,onChange:H=>W(A,H.target.value)}),n.jsx(G,{icon:Ee,className:"text-md mr-4 cursor-pointer hover:text-sea-foam-green dark:hover:text-dark-grayish-red",onClick:()=>{v(T,R[A])}})]}):n.jsx("div",{onClick:()=>{o(T,L)},className:`${K&&"text-sea-foam-green dark:text-dark-grayish-red"} mr-4 cursor-pointer text-lg hover:text-sea-foam-green dark:hover:text-dark-grayish-red`,children:L}),n.jsx("div",{className:"w-4",children:n.jsx(G,{icon:ot,className:`${!K&&"hidden"} ${K&&"text-sea-foam-green dark:text-dark-grayish-red"} text-sm hover:text-sea-foam-green dark:hover:text-dark-grayish-red`})})]})]},A)}),e.length>0&&y.type===x&&n.jsx(jt,{typeName:a.type,occasionBool:!0,downloadJsonFiles:m,selectNewOccasion:g})]})}function kt({details:e,selectedList:t,showEdit:r,setShowEdit:a,handleDetailInputChange:s}){const[o,m]=k.useState(e);k.useEffect(()=>{Object.keys(e).length===0&&e.constructor===Object||m(e)},[e]);const g=(y,x)=>{m(w=>({...w,[x]:y}))};return k.useEffect(()=>{console.log(e)},[e]),n.jsxs("div",{children:[n.jsx("div",{className:"w-80",children:n.jsx("img",{src:e.webp_url,alt:e.caption,className:"h-full w-full"})}),r?n.jsx("div",{children:n.jsxs("div",{children:[n.jsxs("div",{className:"flex flex-row items-center justify-between gap-4",children:["Caption:",n.jsx("input",{className:"border mb-1 mr-2 border-gray-500 bg-transparent text-lg",type:"text",value:o.caption,onChange:y=>g(y.target.value,"caption")})]}),n.jsxs("div",{className:"flex flex-row items-center justify-between gap-4",children:["Date:",n.jsx("input",{className:"border mb-1 mr-2 border-gray-500 bg-transparent text-lg",type:"text",value:o.date,onChange:y=>g(y.target.value,"date")})]}),t.type==="concert"&&n.jsx("div",{children:n.jsxs("div",{className:"flex flex-row items-center justify-between gap-4",children:["Artist:",n.jsx("input",{className:"border mb-1 mr-2 border-gray-500 bg-transparent text-lg",type:"text",value:o.artist,onChange:y=>g(y.target.value,"artist")})]})}),n.jsxs("div",{className:"flex flex-row items-center justify-between gap-4",children:["Place:",n.jsx("input",{className:"border mb-1 mr-2 border-gray-500 bg-transparent text-lg",type:"text",value:o.venue,onChange:y=>g(y.target.value,"venue")})]}),n.jsxs("div",{className:"mt-4",children:[n.jsx(G,{icon:Ee,className:"mr-4 cursor-pointer text-xl hover:text-sea-foam-green dark:hover:text-dark-grayish-red",onClick:()=>s(o.artist,o.caption,o.date,o.venue)}),n.jsx(G,{icon:Ve,className:"cursor-pointer text-xl hover:text-sea-foam-green dark:hover:text-dark-grayish-red",onClick:()=>a(!1)})]})]})}):n.jsxs("div",{children:[n.jsxs("div",{children:["Caption: ",e.caption]}),n.jsxs("div",{children:["Date: ",e.date]}),t.type==="concert"?n.jsxs("div",{children:[n.jsxs("div",{children:["Artist: ",e.artist]}),n.jsxs("div",{children:["Venue: ",e.venue]})]}):n.jsxs("div",{children:["Place: ",e.venue]})]})]})}function fe(e,t,r,a){function s(o){return o instanceof r?o:new r(function(m){m(o)})}return new(r||(r=Promise))(function(o,m){function g(w){try{x(a.next(w))}catch(v){m(v)}}function y(w){try{x(a.throw(w))}catch(v){m(v)}}function x(w){w.done?o(w.value):s(w.value).then(g,y)}x((a=a.apply(e,t||[])).next())})}function pe(e,t){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},a,s,o,m;return m={next:g(0),throw:g(1),return:g(2)},typeof Symbol=="function"&&(m[Symbol.iterator]=function(){return this}),m;function g(x){return function(w){return y([x,w])}}function y(x){if(a)throw new TypeError("Generator is already executing.");for(;m&&(m=0,x[0]&&(r=0)),r;)try{if(a=1,s&&(o=x[0]&2?s.return:x[0]?s.throw||((o=s.return)&&o.call(s),0):s.next)&&!(o=o.call(s,x[1])).done)return o;switch(s=0,o&&(x=[x[0]&2,o.value]),x[0]){case 0:case 1:o=x;break;case 4:return r.label++,{value:x[1],done:!1};case 5:r.label++,s=x[1],x=[0];continue;case 7:x=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(x[0]===6||x[0]===2)){r=0;continue}if(x[0]===3&&(!o||x[1]>o[0]&&x[1]<o[3])){r.label=x[1];break}if(x[0]===6&&r.label<o[1]){r.label=o[1],o=x;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(x);break}o[2]&&r.ops.pop(),r.trys.pop();continue}x=t.call(e,r)}catch(w){x=[6,w],s=0}finally{a=o=0}if(x[0]&5)throw x[1];return{value:x[0]?x[1]:void 0,done:!0}}}function Ge(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var a=r.call(e),s,o=[],m;try{for(;(t===void 0||t-- >0)&&!(s=a.next()).done;)o.push(s.value)}catch(g){m={error:g}}finally{try{s&&!s.done&&(r=a.return)&&r.call(a)}finally{if(m)throw m.error}}return o}function Je(e,t,r){if(r||arguments.length===2)for(var a=0,s=t.length,o;a<s;a++)(o||!(a in t))&&(o||(o=Array.prototype.slice.call(t,0,a)),o[a]=t[a]);return e.concat(o||Array.prototype.slice.call(t))}var Dt=new Map([["aac","audio/aac"],["abw","application/x-abiword"],["arc","application/x-freearc"],["avif","image/avif"],["avi","video/x-msvideo"],["azw","application/vnd.amazon.ebook"],["bin","application/octet-stream"],["bmp","image/bmp"],["bz","application/x-bzip"],["bz2","application/x-bzip2"],["cda","application/x-cdf"],["csh","application/x-csh"],["css","text/css"],["csv","text/csv"],["doc","application/msword"],["docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],["eot","application/vnd.ms-fontobject"],["epub","application/epub+zip"],["gz","application/gzip"],["gif","image/gif"],["heic","image/heic"],["heif","image/heif"],["htm","text/html"],["html","text/html"],["ico","image/vnd.microsoft.icon"],["ics","text/calendar"],["jar","application/java-archive"],["jpeg","image/jpeg"],["jpg","image/jpeg"],["js","text/javascript"],["json","application/json"],["jsonld","application/ld+json"],["mid","audio/midi"],["midi","audio/midi"],["mjs","text/javascript"],["mp3","audio/mpeg"],["mp4","video/mp4"],["mpeg","video/mpeg"],["mpkg","application/vnd.apple.installer+xml"],["odp","application/vnd.oasis.opendocument.presentation"],["ods","application/vnd.oasis.opendocument.spreadsheet"],["odt","application/vnd.oasis.opendocument.text"],["oga","audio/ogg"],["ogv","video/ogg"],["ogx","application/ogg"],["opus","audio/opus"],["otf","font/otf"],["png","image/png"],["pdf","application/pdf"],["php","application/x-httpd-php"],["ppt","application/vnd.ms-powerpoint"],["pptx","application/vnd.openxmlformats-officedocument.presentationml.presentation"],["rar","application/vnd.rar"],["rtf","application/rtf"],["sh","application/x-sh"],["svg","image/svg+xml"],["swf","application/x-shockwave-flash"],["tar","application/x-tar"],["tif","image/tiff"],["tiff","image/tiff"],["ts","video/mp2t"],["ttf","font/ttf"],["txt","text/plain"],["vsd","application/vnd.visio"],["wav","audio/wav"],["weba","audio/webm"],["webm","video/webm"],["webp","image/webp"],["woff","font/woff"],["woff2","font/woff2"],["xhtml","application/xhtml+xml"],["xls","application/vnd.ms-excel"],["xlsx","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],["xml","application/xml"],["xul","application/vnd.mozilla.xul+xml"],["zip","application/zip"],["7z","application/x-7z-compressed"],["mkv","video/x-matroska"],["mov","video/quicktime"],["msg","application/vnd.ms-outlook"]]);function ge(e,t){var r=Ot(e);if(typeof r.path!="string"){var a=e.webkitRelativePath;Object.defineProperty(r,"path",{value:typeof t=="string"?t:typeof a=="string"&&a.length>0?a:e.name,writable:!1,configurable:!1,enumerable:!0})}return r}function Ot(e){var t=e.name,r=t&&t.lastIndexOf(".")!==-1;if(r&&!e.type){var a=t.split(".").pop().toLowerCase(),s=Dt.get(a);s&&Object.defineProperty(e,"type",{value:s,writable:!1,configurable:!1,enumerable:!0})}return e}var Nt=[".DS_Store","Thumbs.db"];function St(e){return fe(this,void 0,void 0,function(){return pe(this,function(t){return Se(e)&&At(e.dataTransfer)?[2,Pt(e.dataTransfer,e.type)]:Ct(e)?[2,Et(e)]:Array.isArray(e)&&e.every(function(r){return"getFile"in r&&typeof r.getFile=="function"})?[2,_t(e)]:[2,[]]})})}function At(e){return Se(e)}function Ct(e){return Se(e)&&Se(e.target)}function Se(e){return typeof e=="object"&&e!==null}function Et(e){return ze(e.target.files).map(function(t){return ge(t)})}function _t(e){return fe(this,void 0,void 0,function(){var t;return pe(this,function(r){switch(r.label){case 0:return[4,Promise.all(e.map(function(a){return a.getFile()}))];case 1:return t=r.sent(),[2,t.map(function(a){return ge(a)})]}})})}function Pt(e,t){return fe(this,void 0,void 0,function(){var r,a;return pe(this,function(s){switch(s.label){case 0:return e.items?(r=ze(e.items).filter(function(o){return o.kind==="file"}),t!=="drop"?[2,r]:[4,Promise.all(r.map(Tt))]):[3,2];case 1:return a=s.sent(),[2,Ye(st(a))];case 2:return[2,Ye(ze(e.files).map(function(o){return ge(o)}))]}})})}function Ye(e){return e.filter(function(t){return Nt.indexOf(t.name)===-1})}function ze(e){if(e===null)return[];for(var t=[],r=0;r<e.length;r++){var a=e[r];t.push(a)}return t}function Tt(e){if(typeof e.webkitGetAsEntry!="function")return qe(e);var t=e.webkitGetAsEntry();return t&&t.isDirectory?it(t):qe(e)}function st(e){return e.reduce(function(t,r){return Je(Je([],Ge(t),!1),Ge(Array.isArray(r)?st(r):[r]),!1)},[])}function qe(e){var t=e.getAsFile();if(!t)return Promise.reject("".concat(e," is not a File"));var r=ge(t);return Promise.resolve(r)}function Ft(e){return fe(this,void 0,void 0,function(){return pe(this,function(t){return[2,e.isDirectory?it(e):It(e)]})})}function it(e){var t=e.createReader();return new Promise(function(r,a){var s=[];function o(){var m=this;t.readEntries(function(g){return fe(m,void 0,void 0,function(){var y,x,w;return pe(this,function(v){switch(v.label){case 0:if(g.length)return[3,5];v.label=1;case 1:return v.trys.push([1,3,,4]),[4,Promise.all(s)];case 2:return y=v.sent(),r(y),[3,4];case 3:return x=v.sent(),a(x),[3,4];case 4:return[3,6];case 5:w=Promise.all(g.map(Ft)),s.push(w),o(),v.label=6;case 6:return[2]}})})},function(g){a(g)})}o()})}function It(e){return fe(this,void 0,void 0,function(){return pe(this,function(t){return[2,new Promise(function(r,a){e.file(function(s){var o=ge(s,e.fullPath);r(o)},function(s){a(s)})})]})})}var $t=function(e,t){if(e&&t){var r=Array.isArray(t)?t:t.split(","),a=e.name||"",s=(e.type||"").toLowerCase(),o=s.replace(/\/.*$/,"");return r.some(function(m){var g=m.trim().toLowerCase();return g.charAt(0)==="."?a.toLowerCase().endsWith(g):g.endsWith("/*")?o===g.replace(/\/.*$/,""):s===g})}return!0};function Xe(e){return zt(e)||Lt(e)||lt(e)||Rt()}function Rt(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Lt(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function zt(e){if(Array.isArray(e))return Me(e)}function Qe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function Ze(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Qe(Object(r),!0).forEach(function(a){ct(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Qe(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function ct(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function he(e,t){return Kt(e)||Ut(e,t)||lt(e,t)||Mt()}function Mt(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function lt(e,t){if(e){if(typeof e=="string")return Me(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Me(e,t)}}function Me(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function Ut(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var a=[],s=!0,o=!1,m,g;try{for(r=r.call(e);!(s=(m=r.next()).done)&&(a.push(m.value),!(t&&a.length===t));s=!0);}catch(y){o=!0,g=y}finally{try{!s&&r.return!=null&&r.return()}finally{if(o)throw g}}return a}}function Kt(e){if(Array.isArray(e))return e}var Ht="file-invalid-type",Vt="file-too-large",Wt="file-too-small",Bt="too-many-files",Gt=function(t){t=Array.isArray(t)&&t.length===1?t[0]:t;var r=Array.isArray(t)?"one of ".concat(t.join(", ")):t;return{code:Ht,message:"File type must be ".concat(r)}},et=function(t){return{code:Vt,message:"File is larger than ".concat(t," ").concat(t===1?"byte":"bytes")}},tt=function(t){return{code:Wt,message:"File is smaller than ".concat(t," ").concat(t===1?"byte":"bytes")}},Jt={code:Bt,message:"Too many files"};function ut(e,t){var r=e.type==="application/x-moz-file"||$t(e,t);return[r,r?null:Gt(t)]}function dt(e,t,r){if(le(e.size))if(le(t)&&le(r)){if(e.size>r)return[!1,et(r)];if(e.size<t)return[!1,tt(t)]}else{if(le(t)&&e.size<t)return[!1,tt(t)];if(le(r)&&e.size>r)return[!1,et(r)]}return[!0,null]}function le(e){return e!=null}function Yt(e){var t=e.files,r=e.accept,a=e.minSize,s=e.maxSize,o=e.multiple,m=e.maxFiles,g=e.validator;return!o&&t.length>1||o&&m>=1&&t.length>m?!1:t.every(function(y){var x=ut(y,r),w=he(x,1),v=w[0],R=dt(y,a,s),C=he(R,1),W=C[0],N=g?g(y):null;return v&&W&&!N})}function Ae(e){return typeof e.isPropagationStopped=="function"?e.isPropagationStopped():typeof e.cancelBubble<"u"?e.cancelBubble:!1}function Ne(e){return e.dataTransfer?Array.prototype.some.call(e.dataTransfer.types,function(t){return t==="Files"||t==="application/x-moz-file"}):!!e.target&&!!e.target.files}function rt(e){e.preventDefault()}function qt(e){return e.indexOf("MSIE")!==-1||e.indexOf("Trident/")!==-1}function Xt(e){return e.indexOf("Edge/")!==-1}function Qt(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window.navigator.userAgent;return qt(e)||Xt(e)}function re(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(a){for(var s=arguments.length,o=new Array(s>1?s-1:0),m=1;m<s;m++)o[m-1]=arguments[m];return t.some(function(g){return!Ae(a)&&g&&g.apply(void 0,[a].concat(o)),Ae(a)})}}function Zt(){return"showOpenFilePicker"in window}function er(e){if(le(e)){var t=Object.entries(e).filter(function(r){var a=he(r,2),s=a[0],o=a[1],m=!0;return ft(s)||(console.warn('Skipped "'.concat(s,'" because it is not a valid MIME type. Check https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/MIME_types/Common_types for a list of valid MIME types.')),m=!1),(!Array.isArray(o)||!o.every(pt))&&(console.warn('Skipped "'.concat(s,'" because an invalid file extension was provided.')),m=!1),m}).reduce(function(r,a){var s=he(a,2),o=s[0],m=s[1];return Ze(Ze({},r),{},ct({},o,m))},{});return[{description:"Files",accept:t}]}return e}function tr(e){if(le(e))return Object.entries(e).reduce(function(t,r){var a=he(r,2),s=a[0],o=a[1];return[].concat(Xe(t),[s],Xe(o))},[]).filter(function(t){return ft(t)||pt(t)}).join(",")}function rr(e){return e instanceof DOMException&&(e.name==="AbortError"||e.code===e.ABORT_ERR)}function nr(e){return e instanceof DOMException&&(e.name==="SecurityError"||e.code===e.SECURITY_ERR)}function ft(e){return e==="audio/*"||e==="video/*"||e==="image/*"||e==="text/*"||/\w+\/[-+.\w]+/g.test(e)}function pt(e){return/^.*\.[\w]+$/.test(e)}var ar=["children"],or=["open"],sr=["refKey","role","onKeyDown","onFocus","onBlur","onClick","onDragEnter","onDragOver","onDragLeave","onDrop"],ir=["refKey","onChange","onClick"];function cr(e){return dr(e)||ur(e)||mt(e)||lr()}function lr(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ur(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function dr(e){if(Array.isArray(e))return Ue(e)}function Le(e,t){return mr(e)||pr(e,t)||mt(e,t)||fr()}function fr(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function mt(e,t){if(e){if(typeof e=="string")return Ue(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ue(e,t)}}function Ue(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function pr(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var a=[],s=!0,o=!1,m,g;try{for(r=r.call(e);!(s=(m=r.next()).done)&&(a.push(m.value),!(t&&a.length===t));s=!0);}catch(y){o=!0,g=y}finally{try{!s&&r.return!=null&&r.return()}finally{if(o)throw g}}return a}}function mr(e){if(Array.isArray(e))return e}function nt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function F(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?nt(Object(r),!0).forEach(function(a){Ke(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):nt(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function Ke(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ce(e,t){if(e==null)return{};var r=hr(e,t),a,s;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(s=0;s<o.length;s++)a=o[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function hr(e,t){if(e==null)return{};var r={},a=Object.keys(e),s,o;for(o=0;o<a.length;o++)s=a[o],!(t.indexOf(s)>=0)&&(r[s]=e[s]);return r}var We=O.forwardRef(function(e,t){var r=e.children,a=Ce(e,ar),s=Be(a),o=s.open,m=Ce(s,or);return O.useImperativeHandle(t,function(){return{open:o}},[o]),k.createElement(O.Fragment,null,r(F(F({},m),{},{open:o})))});We.displayName="Dropzone";var ht={disabled:!1,getFilesFromEvent:St,maxSize:1/0,minSize:0,multiple:!0,maxFiles:0,preventDropOnDocument:!0,noClick:!1,noKeyboard:!1,noDrag:!1,noDragEventsBubbling:!1,validator:null,useFsAccessApi:!0,autoFocus:!1};We.defaultProps=ht;We.propTypes={children:E.func,accept:E.objectOf(E.arrayOf(E.string)),multiple:E.bool,preventDropOnDocument:E.bool,noClick:E.bool,noKeyboard:E.bool,noDrag:E.bool,noDragEventsBubbling:E.bool,minSize:E.number,maxSize:E.number,maxFiles:E.number,disabled:E.bool,getFilesFromEvent:E.func,onFileDialogCancel:E.func,onFileDialogOpen:E.func,useFsAccessApi:E.bool,autoFocus:E.bool,onDragEnter:E.func,onDragLeave:E.func,onDragOver:E.func,onDrop:E.func,onDropAccepted:E.func,onDropRejected:E.func,onError:E.func,validator:E.func};var He={isFocused:!1,isFileDialogActive:!1,isDragActive:!1,isDragAccept:!1,isDragReject:!1,acceptedFiles:[],fileRejections:[]};function Be(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=F(F({},ht),e),r=t.accept,a=t.disabled,s=t.getFilesFromEvent,o=t.maxSize,m=t.minSize,g=t.multiple,y=t.maxFiles,x=t.onDragEnter,w=t.onDragLeave,v=t.onDragOver,R=t.onDrop,C=t.onDropAccepted,W=t.onDropRejected,N=t.onFileDialogCancel,A=t.onFileDialogOpen,T=t.useFsAccessApi,L=t.autoFocus,K=t.preventDropOnDocument,B=t.noClick,ee=t.noKeyboard,H=t.noDrag,J=t.noDragEventsBubbling,Y=t.onError,q=t.validator,U=O.useMemo(function(){return tr(r)},[r]),X=O.useMemo(function(){return er(r)},[r]),Q=O.useMemo(function(){return typeof A=="function"?A:at},[A]),Z=O.useMemo(function(){return typeof N=="function"?N:at},[N]),_=O.useRef(null),V=O.useRef(null),me=O.useReducer(gr,He),ie=Le(me,2),ce=ie[0],h=ie[1],z=ce.isFocused,D=ce.isFileDialogActive,S=O.useRef(typeof window<"u"&&window.isSecureContext&&T&&Zt()),M=function(){!S.current&&D&&setTimeout(function(){if(V.current){var p=V.current.files;p.length||(h({type:"closeDialog"}),Z())}},300)};O.useEffect(function(){return window.addEventListener("focus",M,!1),function(){window.removeEventListener("focus",M,!1)}},[V,D,Z,S]);var ae=O.useRef([]),xe=function(p){_.current&&_.current.contains(p.target)||(p.preventDefault(),ae.current=[])};O.useEffect(function(){return K&&(document.addEventListener("dragover",rt,!1),document.addEventListener("drop",xe,!1)),function(){K&&(document.removeEventListener("dragover",rt),document.removeEventListener("drop",xe))}},[_,K]),O.useEffect(function(){return!a&&L&&_.current&&_.current.focus(),function(){}},[_,L,a]);var ne=O.useCallback(function(l){Y?Y(l):console.error(l)},[Y]),ye=O.useCallback(function(l){l.preventDefault(),l.persist(),c(l),ae.current=[].concat(cr(ae.current),[l.target]),Ne(l)&&Promise.resolve(s(l)).then(function(p){if(!(Ae(l)&&!J)){var I=p.length,P=I>0&&Yt({files:p,accept:U,minSize:m,maxSize:o,multiple:g,maxFiles:y,validator:q}),$=I>0&&!P;h({isDragAccept:P,isDragReject:$,isDragActive:!0,type:"setDraggedFiles"}),x&&x(l)}}).catch(function(p){return ne(p)})},[s,x,ne,J,U,m,o,g,y,q]),ve=O.useCallback(function(l){l.preventDefault(),l.persist(),c(l);var p=Ne(l);if(p&&l.dataTransfer)try{l.dataTransfer.dropEffect="copy"}catch{}return p&&v&&v(l),!1},[v,J]),be=O.useCallback(function(l){l.preventDefault(),l.persist(),c(l);var p=ae.current.filter(function(P){return _.current&&_.current.contains(P)}),I=p.indexOf(l.target);I!==-1&&p.splice(I,1),ae.current=p,!(p.length>0)&&(h({type:"setDraggedFiles",isDragActive:!1,isDragAccept:!1,isDragReject:!1}),Ne(l)&&w&&w(l))},[_,w,J]),ue=O.useCallback(function(l,p){var I=[],P=[];l.forEach(function($){var se=ut($,U),te=Le(se,2),_e=te[0],Pe=te[1],Te=dt($,m,o),Oe=Le(Te,2),Fe=Oe[0],Ie=Oe[1],$e=q?q($):null;if(_e&&Fe&&!$e)I.push($);else{var Re=[Pe,Ie];$e&&(Re=Re.concat($e)),P.push({file:$,errors:Re.filter(function(gt){return gt})})}}),(!g&&I.length>1||g&&y>=1&&I.length>y)&&(I.forEach(function($){P.push({file:$,errors:[Jt]})}),I.splice(0)),h({acceptedFiles:I,fileRejections:P,type:"setFiles"}),R&&R(I,P,p),P.length>0&&W&&W(P,p),I.length>0&&C&&C(I,p)},[h,g,U,m,o,y,R,C,W,q]),de=O.useCallback(function(l){l.preventDefault(),l.persist(),c(l),ae.current=[],Ne(l)&&Promise.resolve(s(l)).then(function(p){Ae(l)&&!J||ue(p,l)}).catch(function(p){return ne(p)}),h({type:"reset"})},[s,ue,ne,J]),oe=O.useCallback(function(){if(S.current){h({type:"openDialog"}),Q();var l={multiple:g,types:X};window.showOpenFilePicker(l).then(function(p){return s(p)}).then(function(p){ue(p,null),h({type:"closeDialog"})}).catch(function(p){rr(p)?(Z(p),h({type:"closeDialog"})):nr(p)?(S.current=!1,V.current?(V.current.value=null,V.current.click()):ne(new Error("Cannot open the file picker because the https://developer.mozilla.org/en-US/docs/Web/API/File_System_Access_API is not supported and no <input> was provided."))):ne(p)});return}V.current&&(h({type:"openDialog"}),Q(),V.current.value=null,V.current.click())},[h,Q,Z,T,ue,ne,X,g]),je=O.useCallback(function(l){!_.current||!_.current.isEqualNode(l.target)||(l.key===" "||l.key==="Enter"||l.keyCode===32||l.keyCode===13)&&(l.preventDefault(),oe())},[_,oe]),we=O.useCallback(function(){h({type:"focus"})},[]),ke=O.useCallback(function(){h({type:"blur"})},[]),De=O.useCallback(function(){B||(Qt()?setTimeout(oe,0):oe())},[B,oe]),i=function(p){return a?null:p},u=function(p){return ee?null:i(p)},d=function(p){return H?null:i(p)},c=function(p){J&&p.stopPropagation()},f=O.useMemo(function(){return function(){var l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},p=l.refKey,I=p===void 0?"ref":p,P=l.role,$=l.onKeyDown,se=l.onFocus,te=l.onBlur,_e=l.onClick,Pe=l.onDragEnter,Te=l.onDragOver,Oe=l.onDragLeave,Fe=l.onDrop,Ie=Ce(l,sr);return F(F(Ke({onKeyDown:u(re($,je)),onFocus:u(re(se,we)),onBlur:u(re(te,ke)),onClick:i(re(_e,De)),onDragEnter:d(re(Pe,ye)),onDragOver:d(re(Te,ve)),onDragLeave:d(re(Oe,be)),onDrop:d(re(Fe,de)),role:typeof P=="string"&&P!==""?P:"presentation"},I,_),!a&&!ee?{tabIndex:0}:{}),Ie)}},[_,je,we,ke,De,ye,ve,be,de,ee,H,a]),b=O.useCallback(function(l){l.stopPropagation()},[]),j=O.useMemo(function(){return function(){var l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},p=l.refKey,I=p===void 0?"ref":p,P=l.onChange,$=l.onClick,se=Ce(l,ir),te=Ke({accept:U,multiple:g,type:"file",style:{display:"none"},onChange:i(re(P,de)),onClick:i(re($,b)),tabIndex:-1},I,V);return F(F({},te),se)}},[V,r,g,de,a]);return F(F({},ce),{},{isFocused:z&&!a,getRootProps:f,getInputProps:j,rootRef:_,inputRef:V,open:i(oe)})}function gr(e,t){switch(t.type){case"focus":return F(F({},e),{},{isFocused:!0});case"blur":return F(F({},e),{},{isFocused:!1});case"openDialog":return F(F({},He),{},{isFileDialogActive:!0});case"closeDialog":return F(F({},e),{},{isFileDialogActive:!1});case"setDraggedFiles":return F(F({},e),{},{isDragActive:t.isDragActive,isDragAccept:t.isDragAccept,isDragReject:t.isDragReject});case"setFiles":return F(F({},e),{},{acceptedFiles:t.acceptedFiles,fileRejections:t.fileRejections});case"reset":return F({},He);default:return e}}function at(){}function xr({photosList:e,handlePhotoSelect:t,displayAcceptedFiles:r,showDelete:a,listOfSelectAllOccasion:s,deleteObject:o,addPhotoDeleteObject:m,deletePhotoDeleteObject:g}){const{getRootProps:y,getInputProps:x,isDragActive:w}=Be({noClick:!0,accept:{"image/*":[]},onDropAccepted:v=>{r(v.map(R=>Object.assign(R,{preview:URL.createObjectURL(R)})))}});return n.jsxs("div",{...y(),className:`relative ${w&&""}`,children:[n.jsx("input",{...x()}),n.jsx("div",{className:`${w&&"invisible"}`,children:e.map((v,R)=>{var C=Object.keys(v)[0],W=v[C],N=v.selected,A=W.occasion,T=W.type;return n.jsxs("div",{className:"flex flex-row items-center",children:[a&&n.jsx("input",{type:"checkbox",className:"border focus:ring-3 text-sea-foarm-green mr-2 h-1 w-1 rounded border-gray-300 p-2 text-sm focus:border-sea-foam-green focus:bg-sea-foam-green focus:ring-sea-foam-green dark:text-dark-grayish-red dark:focus:border-dark-grayish-red dark:focus:bg-dark-grayish-red dark:focus:ring-dark-grayish-red",checked:o.occasion.some(L=>L.hasOwnProperty(A))||o.photos.some(L=>L[T+"/"+A]?.includes(C)),onChange:L=>{o.occasion.some(K=>K.hasOwnProperty(A))||(L.target.checked?m(T+"/"+A,C):L.target.checked||g(T+"/"+A,C))}}),n.jsx("div",{className:`${N&&"text-sea-foam-green dark:text-dark-grayish-red"} mb-1 flex cursor-pointer flex-row items-center justify-between hover:text-sea-foam-green dark:hover:text-dark-grayish-red`,onClick:()=>{t(C,W)},children:n.jsx("div",{className:"mr-4 text-lg",children:C})})]},R)})}),n.jsx("div",{onClick:()=>r([]),className:"mb-1 mr-4 flex cursor-pointer flex-row items-center justify-between text-lg hover:text-sea-foam-green dark:hover:text-dark-grayish-red",children:"+ Add New Photo"}),w&&n.jsx("div",{className:"absolute left-0 top-0 flex h-full w-full items-center justify-center bg-black bg-opacity-50 text-center",children:"Drop Here To Upload Photos"})]})}function yr({photoType:e,handlePhotoTypeSelect:t}){return n.jsx("div",{children:e.map((r,a)=>n.jsxs("div",{className:`${r.selected&&"text-sea-foam-green dark:text-dark-grayish-red"} mb-1 flex cursor-pointer flex-row items-center justify-between hover:text-sea-foam-green dark:hover:text-dark-grayish-red`,onClick:()=>t(a),children:[n.jsx("div",{className:"mr-4 text-lg",children:r.name}),n.jsx("div",{className:"w-4",children:n.jsx(G,{icon:ot,className:`${!r.selected&&"hidden"} text-sm`})})]},a))})}function vr({handleUploadModule:e,listAcceptedFiles:t,selectedOccasionKey:r,selectedOccasionName:a,selectedOccasionType:s,addingMorePhotosToListAcceptedFiles:o,downloadJsonFiles:m,removePhotoFromListAcceptedFiles:g}){const[y,x]=k.useState(""),[w,v]=k.useState(""),[R,C]=k.useState(""),[W,N]=k.useState(""),[A,T]=k.useState(!1),[L,K]=k.useState(!1),[B,ee]=k.useState(!1),[H,J]=k.useState(!1),[Y,q]=k.useState(t.map(h=>({[h.name]:{preview:h.preview,artist:"",venue:"",caption:"",date:""}}))),[U,X]=k.useState(!1),Q=(h,z,D)=>{q(S=>S.map(M=>Object.keys(M)[0]===h?{...M,[h]:{...M[h],[z]:D}}:M))},Z=async()=>{X(!0);const h=new FormData;t.forEach((D,S)=>{h.append(`file${S+1}`,D)});var z=[];(A||L||B||H)&&(z=Y.map(D=>{const S=Object.keys(D)[0];return{[S]:{artist:A?y:D[S].artist,venue:L?w:D[S].venue,caption:B?R:D[S].caption,date:H?W:D[S].date}}})),h.append("metadata",JSON.stringify(z)),h.append("occasionObject",JSON.stringify({selectedOccasionKey:r,selectedOccasionType:s})),await fetch("http://localhost:8001/upload",{method:"POST",credentials:"include",headers:{},body:h}).then(D=>D.json()).then(D=>{D.success&&(m(),e(!1))}).catch(D=>{console.log(D)})};k.useEffect(()=>{console.log(r),console.log(a),console.log(s)},[r,a]);const _=h=>{q(z=>z.filter((D,S)=>S!==h))},{getRootProps:V,getInputProps:me,isDragActive:ie,open:ce}=Be({noClick:!0,accept:{"image/*":[]},onDropAccepted:h=>{console.log(h);const z=h.filter(D=>!t.some(S=>S.name===D.name));o(z.map(D=>Object.assign(D,{preview:URL.createObjectURL(D)}))),q(D=>{const S=z.map(M=>({[M.name]:{preview:M.preview,artist:"",venue:"",caption:"",date:""}}));return[...D,...S]})}});return n.jsxs("div",{className:"relative m-auto h-5/6 w-5/6 overflow-y-auto rounded bg-white p-6 dark:bg-gray-200",...V(),children:[n.jsx("input",{...me()}),ie&&n.jsx("div",{className:"absolute left-0 top-0 z-10 h-full w-full bg-white text-center text-3xl dark:bg-gray-200",children:"Drop Here to Upload"}),n.jsxs("div",{id:"module",className:"relative z-0",children:[n.jsxs("div",{className:"mb-2 flex flex-row justify-between",children:[n.jsx("div",{className:"text-xl",children:`Uploading to ${a}`}),n.jsx(G,{className:"cursor-pointer text-3xl hover:!text-sea-foam-green dark:hover:!text-dark-grayish-red",icon:xt,onClick:h=>{h.stopPropagation(),e(!1)}})]}),n.jsxs("div",{className:"flex flex-col justify-center",children:[n.jsxs("div",{className:"w-auto",children:[n.jsx("div",{children:"Apply to all"}),n.jsxs("div",{className:"mb-2 flex w-min flex-col justify-center",children:[n.jsxs("div",{className:"mb-2 flex flex-row items-center",children:[n.jsx("div",{className:"mr-4",children:n.jsx("input",{type:"checkbox",onChange:h=>{T(h.target.checked)},className:"border focus:ring-3 text-sea-foarm-green h-4 w-4 rounded  border-gray-300 p-2.5 text-sm focus:border-sea-foam-green focus:bg-sea-foam-green focus:ring-sea-foam-green dark:text-dark-grayish-red dark:focus:border-dark-grayish-red dark:focus:bg-dark-grayish-red dark:focus:ring-dark-grayish-red"})}),n.jsxs("div",{className:"flex w-full flex-row items-center justify-between",children:[n.jsx("label",{className:"text-md mr-4 block",children:"Artist:"}),n.jsx("input",{type:"text",id:"Artist",onChange:h=>x(h.target.value),className:"border block w-auto rounded-lg border-gray-300 bg-gray-50 p-2.5 text-sm text-gray-900 focus:border-sea-foam-green focus:ring-sea-foam-green dark:focus:border-dark-grayish-red dark:focus:ring-dark-grayish-red"})]})]}),n.jsxs("div",{className:"mb-2 flex flex-row items-center",children:[n.jsx("div",{className:"mr-4",children:n.jsx("input",{type:"checkbox",onChange:h=>{K(h.target.checked)},className:"border focus:ring-3 text-sea-foarm-green h-4 w-4 rounded  border-gray-300 p-2.5 text-sm focus:border-sea-foam-green focus:bg-sea-foam-green focus:ring-sea-foam-green dark:text-dark-grayish-red dark:focus:border-dark-grayish-red dark:focus:bg-dark-grayish-red dark:focus:ring-dark-grayish-red"})}),n.jsxs("div",{className:"flex w-full flex-row items-center justify-between",children:[n.jsx("label",{className:"text-md mr-4 block",children:"Venue:"}),n.jsx("input",{type:"text",id:"Venue",onChange:h=>v(h.target.value),className:"border block w-auto rounded-lg border-gray-300 bg-gray-50 p-2.5 text-sm text-gray-900 focus:border-sea-foam-green focus:ring-sea-foam-green dark:focus:border-dark-grayish-red dark:focus:ring-dark-grayish-red"})]})]}),n.jsxs("div",{className:"mb-2 flex flex-row items-center",children:[n.jsx("div",{className:"mr-4",children:n.jsx("input",{type:"checkbox",onChange:h=>{ee(h.target.checked)},className:"border focus:ring-3 text-sea-foarm-green h-4 w-4 rounded  border-gray-300 p-2.5 text-sm focus:border-sea-foam-green focus:bg-sea-foam-green focus:ring-sea-foam-green dark:text-dark-grayish-red dark:focus:border-dark-grayish-red dark:focus:bg-dark-grayish-red dark:focus:ring-dark-grayish-red"})}),n.jsxs("div",{className:"flex w-full flex-row items-center justify-between",children:[n.jsx("label",{className:"text-md mr-4 block",children:"Caption:"}),n.jsx("input",{type:"text",id:"Caption",onChange:h=>C(h.target.value),className:"border block w-auto rounded-lg border-gray-300 bg-gray-50 p-2.5 text-sm text-gray-900 focus:border-sea-foam-green focus:ring-sea-foam-green dark:focus:border-dark-grayish-red dark:focus:ring-dark-grayish-red"})]})]}),n.jsxs("div",{className:"mb-2 flex flex-row items-center",children:[n.jsx("div",{className:"mr-4",children:n.jsx("input",{type:"checkbox",onChange:h=>{J(h.target.checked)},className:"border focus:ring-3 text-sea-foarm-green h-4 w-4 rounded  border-gray-300 p-2.5 text-sm focus:border-sea-foam-green focus:bg-sea-foam-green focus:ring-sea-foam-green dark:text-dark-grayish-red dark:focus:border-dark-grayish-red dark:focus:bg-dark-grayish-red dark:focus:ring-dark-grayish-red"})}),n.jsxs("div",{className:"flex w-full flex-row items-center justify-between",children:[n.jsx("label",{className:"text-md mr-4 block",children:"Date:"}),n.jsx("input",{type:"text",id:"Date",onChange:h=>N(h.target.value),className:"border block w-auto rounded-lg border-gray-300 bg-gray-50 p-2.5 text-sm text-gray-900 focus:border-sea-foam-green focus:ring-sea-foam-green dark:focus:border-dark-grayish-red dark:focus:ring-dark-grayish-red"})]})]})]})]}),Y.map((h,z)=>{console.log(h);const D=h[Object.keys(h)[0]],S=Object.keys(h)[0];return n.jsxs("div",{className:`flex flex-col py-8 ${Y.length>1&&"border-b-2  border-sea-foam-green border-opacity-50 dark:border-dark-grayish-red dark:border-opacity-50"}`,children:[n.jsxs("div",{className:"flex flex-row justify-between ",children:[n.jsx("div",{className:"mb-4 text-xl",children:S}),n.jsx("div",{className:"mb-4 cursor-pointer text-xl hover:text-sea-foam-green dark:hover:text-dark-grayish-red",onClick:()=>{g(z),_(z)},children:"Remove"})]}),n.jsxs("div",{className:"flex flex-row items-center",children:[n.jsx("div",{children:n.jsx("div",{className:"border-2 border-sea-foam-green border-opacity-50 dark:border-dark-grayish-red",children:n.jsx("img",{src:D.preview,onLoad:()=>{URL.revokeObjectURL(D.preview)},className:"w-80 object-scale-down"})})}),n.jsxs("div",{className:"ml-2",children:[n.jsxs("div",{className:"mb-2 flex flex-col items-center justify-between sm:flex-row",children:[n.jsx("label",{className:"text-md mx-4 block w-full sm:w-auto",children:"Artist:"}),n.jsx("input",{type:"text",id:`Artist-${z}`,disabled:A,value:D.artist,onChange:M=>{Q(S,"artist",M.target.value)},className:`${A?"cursor-not-allowed bg-gray-300 opacity-50":"bg-gray-50"} border block w-auto rounded-lg border-gray-300 p-2.5 text-sm text-gray-900 focus:border-sea-foam-green focus:ring-sea-foam-green dark:focus:border-dark-grayish-red dark:focus:ring-dark-grayish-red`})]}),n.jsxs("div",{className:"mb-2 flex flex-col items-center justify-between sm:flex-row",children:[n.jsx("label",{className:"text-md mx-4 block w-full sm:w-auto",children:"Venue:"}),n.jsx("input",{type:"text",id:`Venue-${z}`,disabled:L,value:D.venue,onChange:M=>{Q(S,"venue",M.target.value)},className:`${L?"cursor-not-allowed bg-gray-300 opacity-50":"bg-gray-50"} border block w-auto rounded-lg border-gray-300 p-2.5 text-sm text-gray-900 focus:border-sea-foam-green focus:ring-sea-foam-green dark:focus:border-dark-grayish-red dark:focus:ring-dark-grayish-red `})]}),n.jsxs("div",{className:"mb-2 flex flex-col items-center justify-between sm:flex-row",children:[n.jsx("label",{className:"text-md mx-4 block w-full sm:w-auto",children:"Caption:"}),n.jsx("input",{type:"text",id:`Caption-${z}`,disabled:B,value:D.caption,onChange:M=>{Q(S,"caption",M.target.value)},className:`${B?"cursor-not-allowed bg-gray-300 opacity-50":"bg-gray-50"} border block w-auto rounded-lg border-gray-300 p-2.5 text-sm text-gray-900 focus:border-sea-foam-green focus:ring-sea-foam-green dark:focus:border-dark-grayish-red dark:focus:ring-dark-grayish-red `})]}),n.jsxs("div",{className:"mb-2 flex flex-col items-center justify-between sm:flex-row",children:[n.jsx("label",{className:"text-md mx-4 block w-full sm:w-auto",children:"Date:"}),n.jsx("input",{type:"text",id:`Date-${z}`,disabled:H,value:D.date,onChange:M=>{Q(S,"date",M.target.value)},className:`${H?"cursor-not-allowed bg-gray-300 opacity-50":"bg-gray-50"} border block w-auto rounded-lg border-gray-300 p-2.5 text-sm text-gray-900 focus:border-sea-foam-green focus:ring-sea-foam-green dark:focus:border-dark-grayish-red dark:focus:ring-dark-grayish-red `})]})]})]})]},S)}),t.length!==0&&n.jsxs("div",{className:"mt-4 flex flex-row gap-4",children:[U?n.jsxs("div",{className:"flex items-center space-x-1 text-xl",children:[n.jsx("span",{children:"Uploading"}),n.jsx("span",{className:"animate-fastPulse",children:"."}),n.jsx("span",{className:"animate-fastPulse",children:"."}),n.jsx("span",{className:"animate-fastPulse",children:"."})]}):n.jsx("button",{disabled:t.length===0,className:`${t.length===0?"text-xl text-gray-500 opacity-50 hover:opacity-75":"cursor-pointer text-xl hover:text-sea-foam-green dark:hover:text-dark-grayish-red"}`,onClick:()=>{Z()},children:"Upload"}),n.jsx("button",{onClick:h=>{U||(h.stopPropagation(),e(!1))},className:"text-xl hover:text-sea-foam-green dark:hover:text-dark-grayish-red",children:"Cancel"})]})]}),n.jsxs("div",{className:"my-20 flex flex-col items-center justify-center text-center text-xl",children:[n.jsx("div",{className:"mr-2",children:"Drop Anywhere to Upload or "}),n.jsx("a",{onClick:ce,className:"cursor-pointer hover:text-sea-foam-green dark:hover:text-dark-grayish-red",children:"Open File Dialog"})]})]})]})}function Dr(){const[e,t]=k.useState({type:"",occasion:"",photo:"",details:!1}),[r,a]=k.useState({type:"",occasion:"",photo:"",details:!1}),[s,o]=k.useState({}),[m,g]=k.useState(!1),[y,x]=k.useState([{name:"Concert",selected:!1},{name:"Street & Landscape",selected:!1}]),[w,v]=k.useState([]),[R,C]=k.useState([]),[W,N]=k.useState({}),[A,T]=k.useState(null),[L,K]=k.useState([]),[B,ee]=k.useState(!1),[H,J]=k.useState(!1),[Y,q]=k.useState(!1),[U,X]=k.useState({occasion:[],photos:[]}),[Q,Z]=k.useState(!1),_=["concert","streetlandscape"];k.useEffect(()=>{T(r.type)},[r.type]);const V=i=>{K(i),ee(!0)},me=i=>{K(u=>u.filter((d,c)=>c!==i))},ie=i=>{ee(i)},ce=i=>{K(u=>{const d=[],c=[];return i.forEach(f=>{u.some(b=>b.name===f.name)?c.push(f):d.push(f)}),c.forEach(f=>console.log(f.name)),[...u,...d]})},h=async()=>{await fetch("http://localhost:8001/get_index_and_key_json",{method:"GET",credentials:"include",headers:{Accept:"application/json","Content-Type":"application/json"}}).then(i=>i.json()).then(i=>{o(i.data)}).catch(i=>console.log(i))},z=async()=>{await fetch("http://localhost:8001/get_index_and_key_json",{method:"GET",credentials:"include",headers:{Accept:"application/json","Content-Type":"application/json"}}).then(i=>i.json()).then(i=>{o(i.data)}).catch(i=>console.log(i))},D=(i,u)=>{t(d=>{const c={...d};return c.occasion=u,c.photo="",c.details=!1,c}),a(d=>{const c={...d};return c.occasion=i,c.photo="",c.details=!1,c}),console.log("occasion selected")};k.useEffect(()=>{(async()=>{(async()=>{await fetch("http://localhost:8001/get_index_and_key_json",{method:"GET",credentials:"include",headers:{Accept:"application/json","Content-Type":"application/json"}}).then(d=>d.json()).then(d=>{o(d.data)}).catch(d=>console.log(d))})().then(()=>{g(!0)})})()},[]),k.useEffect(()=>{e.type&&e.occasion&&r.occasion&&!e.photo&&S(_.indexOf(e.type),e.occasion,r.occasion)},[s]);const S=(i,u,d)=>{t(b=>{const j={...b};return j.type=_[i],j.occasion=u,j.photo="",j.details=!1,j}),a(b=>{const j={...b};return j.type=y[i].name,j.occasion=d,j.photo="",j.details=!1,j}),N({}),x(b=>{const j=[...b];for(let l of j)l.name===j[i].name?l.selected=!0:l.selected=!1;return j});let c=[];for(let b in s[_[i]].index)c.push({[b]:s[_[i]].index[b],selected:b===u,deleted_selected:!1});v(c);let f=[];for(let b of s[e.type].keys[u])b.selected=!1,f.push(b);C(f)},M=async i=>{if(_[i]!==e.type){X({occasion:[],photos:[]}),t(d=>{const c={...d};return c.type=_[i],c.occasion="",c.photo="",c.details=!1,c}),a(d=>{const c={...d};return c.type=y[i].name,c.occasion="",c.photo="",c.details=!1,c}),x(d=>{const c=[...d];for(let f of c)f.name===c[i].name?f.selected=!0:f.selected=!1;return c});let u=[];for(let d in s[_[i]].index)u.push({[d]:s[_[i]].index[d],selected:!1,deleted_selected:!1});v(u),C([]),N({})}},ae=(i,u)=>{i!==e.occasion&&(t(c=>{const f={...c};return f.occasion=i,f.photo="",f.details=!1,f}),a(c=>{const f={...c};return f.occasion=u,f.photo="",f.details=!1,f}),C([]),N({})),v(c=>{const f=[...c];for(let b of f)i===Object.keys(b)[0]?b.selected=!0:b.selected=!1;return f});let d=[];for(let c of s[e.type].keys[i])c.selected=!1,d.push(c);C(d)},xe=(i,u)=>{i!==e.photo&&(t(d=>{const c={...d};return c.photo=i,c.details=!1,c}),a(d=>{const c={...d};return c.photo=i,c.details=!1,c}),N({})),C(d=>{const c=[...d];for(let f of c)i===Object.keys(f)[0]?f.selected=!0:f.selected=!1;return c}),t(d=>{const c={...d};return c.details=!0,c}),N({caption:u.caption,date:u.date,url:u.url,webp_url:u.webp_url,artist:u.artist,venue:u.venue})},ne=()=>{t(i=>{const u={...i};return u.occasion="",u.photo="",u.details=!1,u}),a(i=>{const u={...i};return u.occasion="",u.photo="",u.details=!1,u}),v([]),C([]),N({})},ye=()=>{t(i=>{const u={...i};return u.photo="",u.details=!1,u}),a(i=>{const u={...i};return u.photo="",u.details=!1,u}),C([]),N({})},ve=(i,u)=>{v(d=>{const c=[...d];return c[i].deleted_selected=!0,c}),X(d=>({...d,occasion:[...d.occasion,u]}))},be=(i,u)=>{X(d=>({...d,occasion:d.occasion.filter(c=>{const f=Object.keys(c)[0],b=c[f],j=Object.keys(u)[0],l=u[j];return!(f==j&&b==l)})})),v(d=>{const c=[...d];return c[i].deleted_selected=!1,c})},ue=(i,u)=>{X(d=>{const{occasion:c,photos:f}=d,b=f.findIndex(l=>Object.keys(l)[0]===i);let j;return b!==-1?(j=[...f],j[b][i]=[...j[b][i],u]):j=[...f,{[i]:[u]}],{occasion:c,photos:j}})},de=(i,u)=>{X(d=>{const c={...d},f=c.photos,b=f.findIndex(j=>j.hasOwnProperty(i));if(b!==-1){const j=f[b][i],l=j.indexOf(u);l!==-1&&(j.splice(l,1),j.length===0&&f.splice(b,1))}return c})},oe=async()=>{var i=U.occasion.map(u=>Object.values(u)[0]);console.log(U.occasion.map(u=>Object.values(u)[0])),await fetch("http://localhost:8001/delete_occasions",{method:"DELETE",credentials:"include",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({occasion:i})}).then(u=>u.json()).then(u=>{if(!u.success)console.log("There has been an error: "),console.log(u.error);else if(u.success)return console.log(u),X(d=>({...d,occasion:[]})),!0}).catch(u=>console.log(u))},je=async()=>{await fetch("http://localhost:8001/delete_files",{method:"DELETE",credentials:"include",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({keys:U.photos})}).then(i=>i.json()).then(i=>{if(!i.success)console.log("There has been an error: "),console.log(i.error);else if(i.success)return console.log(i),X(u=>({...u,photos:[]})),!0}).catch(i=>console.log(i))},we=async()=>{U.occasion.length>0&&await oe(),U.photos.length>0&&await je(),await fetch("http://localhost:8001/get_index_and_key_json",{method:"GET",credentials:"include",headers:{Accept:"application/json","Content-Type":"application/json"}}).then(i=>i.json()).then(i=>{o(i.data);let u=i.data;t(c=>{const f={...c};return f.occasion="",f.photo="",f.details=!1,f}),a(c=>{const f={...c};return f.occasion="",f.photo="",f.details=!1,f}),N({});let d=[];for(let c in u[e.type].index)d.push({[c]:u[e.type].index[c],selected:!1,deleted_selected:!1});v(d)}).catch(i=>console.log(i))},ke=async(i,u)=>{var d={path:`${e.type}/${i}`,new_path:`${e.type}/${Object.keys(u)[0]}`,new_occasion_name:u[Object.keys(u)[0]]};await fetch("http://localhost:8001/edit_occasion_name",{method:"PUT",credentials:"include",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(d)}).then(c=>c.json()).then(c=>{c.success?c.success&&(console.log(c),fetch("http://localhost:8001/get_index_and_key_json",{method:"GET",credentials:"include",headers:{Accept:"application/json","Content-Type":"application/json"}}).then(f=>f.json()).then(f=>{o(f.data);let b=f.data;t(l=>{const p={...l};return p.occasion="",p.photo="",p.details=!1,p}),a(l=>{const p={...l};return p.occasion="",p.photo="",p.details=!1,p}),N({});let j=[];for(let l in b[e.type].index)j.push({[l]:b[e.type].index[l],selected:!1,deleted_selected:!1});v(j),Z(!0),setTimeout(()=>{Z(!1)},7500)}).catch(f=>console.log(f))):(console.log("There has been an error: "),console.log(c.error))}).catch(c=>console.log(c))},De=async(i,u,d,c)=>{var f={path:{[`${e.type}/${e.occasion}/${e.photo}`]:{artist:i,caption:u,date:d,venue:c}}};await fetch("http://localhost:8001/edit_details",{method:"PUT",credentials:"include",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(f)}).then(b=>b.json()).then(b=>{b.success?b.success&&(console.log(b),fetch("http://localhost:8001/get_index_and_key_json",{method:"GET",credentials:"include",headers:{Accept:"application/json","Content-Type":"application/json"}}).then(j=>j.json()).then(j=>{o(j.data);let l=j.data,p=[];for(let $ in l[e.type].index)p.push({[$]:l[e.type].index[$],selected:e.occasion===$,deleted_selected:!1});v(p),C($=>{const se=[...$];for(let te of se)e.photo===Object.keys(te)[0]?te.selected=!0:te.selected=!1;return se});const P=l[e.type].keys[e.occasion].find($=>e.photo in $)[e.photo];N({caption:P.caption,date:P.date,url:P.url,webp_url:P.webp_url,artist:P.artist,venue:P.venue}),Z(!0),setTimeout(()=>{Z(!1)},7500)}).catch(j=>console.log(j))):(console.log("There has been an error: "),console.log(b.error))}).catch(b=>console.log(b))};return k.useEffect(()=>{console.log(e)},[e]),m?n.jsxs("div",{className:"overflow-x-auto",children:[n.jsxs("div",{className:"flex h-8 w-max flex-row items-center overflow-x-auto",children:[n.jsx(G,{onClick:z,icon:yt,className:"mr-2 cursor-pointer hover:text-sea-foam-green dark:hover:text-dark-grayish-red"}),r.type&&n.jsxs("div",{className:"flex w-auto flex-row",children:[n.jsx("div",{onClick:ne,className:"cursor-pointer hover:text-sea-foam-green dark:hover:text-dark-grayish-red",children:`${r.type}`}),n.jsx("div",{className:"px-2",children:"/"})]}),r.occasion&&n.jsxs("div",{className:"flex flex-row ",children:[n.jsx("div",{onClick:ye,className:"cursor-pointer hover:text-sea-foam-green dark:hover:text-dark-grayish-red",children:`${r.occasion}`}),n.jsx("div",{className:"px-2",children:"/"})]}),n.jsx("div",{className:"cursor-pointer hover:text-sea-foam-green dark:hover:text-dark-grayish-red",children:r.photo})]}),n.jsxs("div",{className:"flex flex-row",children:[n.jsxs("div",{className:"mt-2 flex w-24 flex-row items-center gap-4",children:[n.jsx(G,{icon:vt,className:"cursor-pointer hover:text-sea-foam-green dark:hover:text-dark-grayish-red",onClick:()=>J(!H)}),H&&n.jsxs("div",{className:"flex flex-row items-center gap-2",children:[n.jsx(G,{icon:Ee,className:`${U.occasion.length!==0||U.photos.length!==0?"cursor-pointer hover:text-sea-foam-green dark:hover:text-dark-grayish-red":"text-gray-500"} text-xl`,onClick:we}),n.jsx(G,{icon:Ve,className:"cursor-pointer hover:text-sea-foam-green dark:hover:text-dark-grayish-red",onClick:()=>J(!1)})]})]}),n.jsx("div",{className:"mt-2 flex h-8 flex-row items-center gap-4",children:n.jsx(G,{icon:bt,className:`${Y&&"text-sea-foam-green dark:text-dark-grayish-red"} cursor-pointer text-lg hover:text-sea-foam-green dark:hover:text-dark-grayish-red`,onClick:()=>q(!Y)})})]}),n.jsxs("div",{className:"mt-2 flex flex-row ",children:[n.jsx("div",{className:"flex flex-col items-stretch",children:n.jsx(yr,{photoType:y,handlePhotoTypeSelect:M})}),n.jsx("div",{className:"ml-4 flex flex-col items-stretch",children:n.jsx(wt,{occasionList:w,showDelete:H,addOccasionDeleteObject:ve,selectedList:e,removeOccasionDeleteObject:be,handleOccasionSelect:ae,downloadJsonFiles:h,selectNewOccasion:D,selectedListName:r,previousType:A,showEdit:Y,handleOccasionInputChange:ke})}),n.jsx("div",{className:"ml-4 flex flex-col items-stretch",id:"photo-list",children:r.occasion!==""&&n.jsx(xr,{showDelete:H,photosList:R,handlePhotoSelect:xe,displayAcceptedFiles:V,listOfSelectAllOccasion:U.occasion,deleteObject:U,addPhotoDeleteObject:ue,deletePhotoDeleteObject:de})}),n.jsx("div",{className:`${!e.details&&"hidden"} ml-4`,children:n.jsx(kt,{details:W,selectedList:e,showEdit:Y,setShowEdit:q,handleDetailInputChange:De})})]}),B&&n.jsx("div",{onClick:i=>{i.currentTarget===i.target&&ie(!1)},className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 text-black dark:text-black",children:n.jsx(vr,{handleUploadModule:ie,listAcceptedFiles:L,selectedOccasionKey:e.occasion,selectedOccasionName:r.occasion,selectedOccasionType:e.type,addingMorePhotosToListAcceptedFiles:ce,downloadJsonFiles:h,removePhotoFromListAcceptedFiles:me})}),!Q&&n.jsx("div",{}),Q&&n.jsx("div",{className:"animate-fade-out fixed bottom-0 left-0 m-4 text-2xl",children:"SUCCESSFULLY SAVED"})]}):n.jsx("div",{className:"mt-4",children:"Loading..."})}export{Dr as default};
