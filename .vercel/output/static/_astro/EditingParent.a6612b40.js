import{r as b,R as n}from"./index.f824fa59.js";import{F as g,i as F,d as I,j as C}from"./index.bc8c7355.js";import{j as t}from"./jsx-runtime.0209ad28.js";function G({typeName:i,occasionBool:l,occasionName:c,downloadJsonFiles:d}){const h=b.useRef(null),[v,N]=b.useState(!1),x=j=>{N(j)},y=async j=>{j.preventDefault(),l&&await fetch("https://portfolio-website-api-production.up.railway.app/add_occasion",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({type:i.toLowerCase(),occasion:h.current?.value})}).then(f=>{f.status>=400?console.log("Error adding new occasion"):(d(),x(!1))})};return b.useEffect(()=>{v&&h.current&&h.current.focus()},[v]),t.jsxs("div",{children:[t.jsx("div",{onClick:()=>d(),children:"Reload"}),v&&t.jsx("div",{children:t.jsxs("form",{onSubmit:y,children:[t.jsx("input",{className:"border mb-1 mr-2 border-gray-500 bg-transparent text-lg",ref:h,type:"text",placeholder:`New ${l?"Occaison":"Photo"}`}),t.jsx("button",{type:"submit",children:t.jsx(g,{icon:F,className:"text-md mr-2 cursor-pointer hover:text-sea-foam-green dark:hover:text-dark-grayish-red"})}),t.jsx(g,{icon:I,onClick:()=>x(!1),className:"text-md cursor-pointer hover:text-sea-foam-green dark:hover:text-dark-grayish-red"})]})}),t.jsx("div",{onClick:()=>x(!0),className:"mb-1 mr-4 flex cursor-pointer flex-row items-center justify-between text-lg hover:text-sea-foam-green dark:hover:text-dark-grayish-red",children:"+ Add New "})]})}function U(){const[i,l]=n.useState({type:"",occasion:"",photo:"",details:!1}),[c,d]=n.useState({type:"",occasion:"",photo:"",details:!1}),[h,v]=n.useState({}),[N,x]=n.useState(!1),[y,j]=n.useState([{name:"Concert",selected:!1},{name:"Street & Landscape",selected:!1}]),[f,w]=n.useState([]),[T,u]=n.useState([]),[m,p]=n.useState({}),[O,P]=n.useState(null),S=["concert","streetlandscape"];n.useEffect(()=>{P(c.type)},[c.type]);const L=async()=>{(async()=>{await fetch("https://portfolio-website-api-production.up.railway.app/get_index_and_key_json",{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"}}).then(s=>s.json()).then(s=>{v(s.data)}).catch(s=>console.log(s))})().then(()=>{x(!0)})};n.useEffect(()=>{(async()=>{await L(),x(!0)})()},[]),n.useEffect(()=>{console.log(f)},[f]);const $=a=>{a!==i.type&&(l(r=>{const e={...r};return e.type=S[a],e.occasion="",e.photo="",e.details=!1,e}),d(r=>{const e={...r};return e.type=y[a].name,e.occasion="",e.photo="",e.details=!1,e}),w([]),u([]),p({})),j(r=>{const e=[...r];for(let o of e)o.name===e[a].name?o.selected=!0:o.selected=!1;return e});let s=[];for(let r in h[S[a]].index)s.push({[r]:h[S[a]].index[r],selected:!1});w(s)},A=(a,s)=>{a!==i.occasion&&(l(e=>{const o={...e};return o.occasion=a,o.photo="",o.details=!1,o}),console.log(f),d(e=>{const o={...e};return o.occasion=s,o.photo="",o.details=!1,o}),u([]),p({})),w(e=>{const o=[...e];for(let k of o)a===Object.keys(k)[0]?k.selected=!0:k.selected=!1;return o});let r=[];for(let e of h[i.type].keys[a])e.selected=!1,r.push(e);u(r)},E=(a,s)=>{a!==i.photo&&(l(r=>{const e={...r};return e.photo=a,e.details=!1,e}),d(r=>{const e={...r};return e.photo=a,e.details=!1,e}),p({})),u(r=>{const e=[...r];for(let o of e)a===Object.keys(o)[0]?o.selected=!0:o.selected=!1;return e}),l(r=>{const e={...r};return e.details=!0,e}),p({caption:s.caption,date:s.date,url:s.url,webp_url:s.webp_url,artist:s.artist,venue:s.venue})},D=()=>{l(a=>{const s={...a};return s.occasion="",s.photo="",s.details=!1,s}),d(a=>{const s={...a};return s.occasion="",s.photo="",s.details=!1,s}),w([]),u([]),p({})},R=()=>{l(a=>{const s={...a};return s.photo="",s.details=!1,s}),console.log(f),d(a=>{const s={...a};return s.photo="",s.details=!1,s}),u([]),p({})};return N?t.jsxs("div",{className:"overflow-x-auto",children:[t.jsxs("div",{className:"flex h-8 flex-row overflow-x-auto",children:[c.type&&t.jsxs("div",{className:"flex w-auto flex-row",children:[t.jsx("div",{onClick:D,className:"cursor-pointer hover:text-sea-foam-green dark:hover:text-dark-grayish-red",children:`${c.type}`}),t.jsx("div",{className:"px-2",children:"/"})]}),c.occasion&&t.jsxs("div",{className:"flex flex-row ",children:[t.jsx("div",{onClick:R,className:"cursor-pointer hover:text-sea-foam-green dark:hover:text-dark-grayish-red",children:`${c.occasion}`}),t.jsx("div",{className:"px-2",children:"/"})]}),t.jsx("div",{className:"cursor-pointer hover:text-sea-foam-green dark:hover:text-dark-grayish-red",children:c.photo})]}),t.jsxs("div",{className:"mt-2 flex flex-row ",children:[t.jsx("div",{className:"flex flex-col items-stretch",children:y.map((a,s)=>t.jsxs("div",{className:`${a.selected&&"text-sea-foam-green dark:text-dark-grayish-red"} mb-1 flex cursor-pointer flex-row items-center justify-between hover:text-sea-foam-green dark:hover:text-dark-grayish-red`,onClick:()=>$(s),children:[t.jsx("div",{className:"mr-4 text-lg",children:a.name}),t.jsx("div",{className:"w-4",children:t.jsx(g,{icon:C,className:`${!a.selected&&"hidden"} text-sm`})})]},s))}),t.jsxs("div",{className:"ml-4 flex flex-col items-stretch",children:[f.map((a,s)=>{var r=Object.keys(a)[0],e=a[r],o=a[Object.keys(a)[1]];return t.jsxs("div",{className:`${o&&"text-sea-foam-green dark:text-dark-grayish-red"} mb-1 flex cursor-pointer flex-row items-center justify-between hover:text-sea-foam-green dark:hover:text-dark-grayish-red`,onClick:()=>{A(r,e)},children:[t.jsx("div",{className:"mr-4 text-lg",children:e}),t.jsx("div",{className:"w-4",children:t.jsx(g,{icon:C,className:`${!o&&"hidden"} text-sm`})})]},s)}),f.length>0&&c.type===O&&t.jsx(G,{typeName:c.type,occasionBool:!0,downloadJsonFiles:L})]}),t.jsx("div",{className:"ml-4 flex flex-col items-stretch",children:T.map((a,s)=>{var r=Object.keys(a)[0],e=a[r],o=a.selected;return t.jsx("div",{className:`${o&&"text-sea-foam-green dark:text-dark-grayish-red"} mb-1 flex cursor-pointer flex-row items-center justify-between hover:text-sea-foam-green dark:hover:text-dark-grayish-red`,onClick:()=>{E(r,e)},children:t.jsx("div",{className:"mr-4 text-lg",children:r})},s)})}),t.jsxs("div",{className:`${!i.details&&"hidden"} ml-4`,children:[t.jsx("div",{className:"w-80",children:t.jsx("img",{src:m.webp_url,alt:m.caption,className:"h-full w-full"})}),t.jsxs("div",{children:["Caption: ",m.caption]}),t.jsxs("div",{children:["Date: ",m.date]}),i.type==="concert"?t.jsxs("div",{children:[t.jsxs("div",{children:["Artist: ",m.artist]}),t.jsxs("div",{children:["Venue: ",m.venue]})]}):t.jsxs("div",{children:["Place: ",m.venue]})]})]})]}):t.jsx("div",{className:"mt-4",children:"Loading..."})}export{U as default};
